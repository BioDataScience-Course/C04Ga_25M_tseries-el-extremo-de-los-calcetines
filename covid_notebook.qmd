---
title: "Impact de la COVID-19 sur la mobilité du peuple belge"
author: "Huart Hugo, Liébin Arnaud, Shaw Alan, Rochet Loïc"
format:
  html:
    code-fold: true
    code-tools: true
    toc: true
editor: visual
lang: fr
---

<!--# Ceci est un commentaire. -->

<!--% Ceci est une consigne. Ne jamais modifier ni déplacer les consignes dans le document ! -->

<!--% Complétez le titre et le nom des auteurs (auteur1, auteur2, auteur3 et auteur 4) dans l'entête YAML.-->

## Introduction et but

<!--% Rédigez une courte introduction de 3 ou 5 phrases qui présente vos données. Ajoutez une phrase de but. Vous devez citer la bibliographie en utilisant le formatage Markdown ad hoc et en incluant votre référence au format bibtex dans le fichier references.bib. -->

La Covid19 a eu une grande influence sur le quotidien des belges. Nous observons l'impact de cette maladie sur la mobilité globale dans la Belgique pendant les années de 2020 à 2022. La mobilité de référence est calculée entre le 3 janvier et le 6 février 2020, une période durant laquelle il n'y a pas encore de mesures restrictives. Nous avons pour objectif d'analyser l'impact de la Covid19 sur la mobilité en Belgique.

## Matériel et méthodes

<!--% Indiquez ici d'où viennent les données et aussi quel logiciel (et version) vous utilisez pour les analyses. Inspirez-vous des projets déjà réalisés. -->

## Analyses

<!--% Lisez bien les éléments devant guider votre analyse proposée dans le README.-->

```{r setup, include=FALSE}
# Nécessaire pour les tests SDD, ne pas utiliser dans un "vrai" projet
if (!"tools:tests" %in% search())
  source(here::here("tests/tools_tests.R"), attach(NULL, name = "tools:tests"))
# Configuration de l'environnement
SciViews::R("ts")
```

```{r}
covid <- read("data/mobility_wallonia.rds")
head(covid)
```

<!--% Ajoutez le nombre de chunks que vous souhaitez. Répartissez-vous le travail correctement. Structurez la section en partie avec des titres explicites de niveau trois.-->

```{r}
skimr::skim(covid)
```

```{r remaniement des données}
rename(covid, commerce_recreation = retail_and_recreation_percent_change_from_baseline, grocery_pharmacy = grocery_and_pharmacy_percent_change_from_baseline, parks = parks_percent_change_from_baseline, transit = transit_stations_percent_change_from_baseline, workplaces = workplaces_percent_change_from_baseline, residential = residential_percent_change_from_baseline) ->
  covid
```

```{r}
# Copie de la série initiale sous une autre nom
covid_sem <- covid
# Calcul des jours de la semaine
covid_sem$weekdays <- weekdays(as.POSIXct(covid_sem$date))
# Les données du week-end sont remplacées par des valeurs manquantes
covid_sem[covid_sem$weekdays == "Saturday" | covid_sem$weekdays == "Sunday" , 2:7] <- NA 
```

```{r}
# Copie de la série initiale sous une autre nom
covid_we <- covid
# Calcul des jours de la semaine
covid_we$weekdays <- weekdays(as.POSIXct(covid_we$date))
# Les données du week-end sont remplacées par des valeurs manquantes
covid_we[covid_we$weekdays == "Monday" | covid_we$weekdays == "Tuesday"| covid_we$weekdays == "Wednesday" |covid_we$weekdays == "Thursday" | covid_we$weekdays == "Friday" , 2:7] <- NA 
```

### Commerce et récréation

```{r loïctest}
core_ts <- ts(covid$commerce_recreation, start = c(2020, 46), frequency = 365)
plot(core_ts)
core_ts_sem <- aggregate(ts(covid_sem$commerce_recreation, start = c(2020, 46), frequency = 365), 52, FUN = collapse::fmean, ts.eps = 1/52)
plot(core_ts_sem)
core_ts_we <- aggregate(ts(covid_we$commerce_recreation, start = c(2020, 46), frequency = 365), 52, FUN = collapse::fmean, ts.eps = 1/52)
plot(core_ts_we)
```

analyse

```{r acf recreation1}
acf(core_ts_sem)
acf(core_ts_we)
```

```{r statslide}
sl_core <- stat.slide(time(core_ts), core_ts,
  xmin = 0, n = 7, deltat = 10)
```

```{r tendances locales}

```

```{r tendance générale}

```



### Lieu de travail

```{r alantest}
#semaine
covid_al_ts <- ts(covid_sem$residential, start = c(2020, 46), frequency = 365)
covid_al_ts2 <- aggregate(covid_al_ts, 52, FUN = collapse::fmean, ts.eps = 1/52)
plot(covid_al_ts2)
```

```{r hugotest}
#WE
```

PLAN

retravailler les données (renommer)

création objet ts (+ visualisation et vérification du ts (end, start, tsp))

analyse : autocorrélation, stat.slide (boxplot ?), tendance générale (si cyclique : analyse spectrale), tendance locale

## Conclusion

<!--% Lorsque toutes les analyses sont réalisées, terminez ce bloc-notes avec 3 à 6 phrases de conclusion en rapport avec ce que vous avez observé dans vos analyses. Quels sont les éléments les plus pertinents que vous retenez ? -->

...vos conclusions ici...
